# ==================================================================
# Kortix - Aliyun (Alibaba Cloud) Configuration Example
# ==================================================================
# This file shows how to configure Kortix to use Aliyun services
# Copy this to .env and fill in your credentials
# ==================================================================

# ==================== Cloud Provider Selection ====================
CLOUD_PROVIDER=aliyun  # Options: aliyun | tencent | local | supabase

# ==================== Aliyun Credentials ====================
# Get these from Aliyun Console: https://ram.console.aliyun.com/
ALIYUN_ACCESS_KEY_ID=your_access_key_id
ALIYUN_ACCESS_KEY_SECRET=your_access_key_secret
ALIYUN_REGION=cn-hangzhou  # Options: cn-hangzhou, cn-shanghai, cn-beijing, etc.

# ==================== Database (RDS/PolarDB) ====================
# Aliyun RDS PostgreSQL or PolarDB Configuration
ALIYUN_RDS_HOST=your-rds-instance.mysql.rds.aliyuncs.com
ALIYUN_RDS_PORT=5432
ALIYUN_RDS_DATABASE=kortix
ALIYUN_RDS_USERNAME=kortix_user
ALIYUN_RDS_PASSWORD=your_secure_password

# Optional: Read Replica for better performance
# ALIYUN_RDS_READ_HOST=your-read-replica.mysql.rds.aliyuncs.com

# ==================== Object Storage (OSS) ====================
# Aliyun OSS Configuration
ALIYUN_OSS_ENDPOINT=oss-cn-hangzhou.aliyuncs.com
ALIYUN_OSS_BUCKET=kortix-files
ALIYUN_OSS_REGION=cn-hangzhou

# Optional: CDN domain for faster file access
# ALIYUN_OSS_CDN_DOMAIN=cdn.yourdomain.com

# ==================== LLM Service (Bailian/DashScope) ====================
# Aliyun Bailian (百炼) API Key
# Get from: https://dashscope.console.aliyun.com/
DASHSCOPE_API_KEY=sk-your-dashscope-api-key

# Main LLM configuration
MAIN_LLM=dashscope  # Use Aliyun Bailian as primary LLM
MAIN_LLM_MODEL=qwen-max  # Options: qwen-max, qwen-plus, qwen-turbo, qwen-long, qwen2.5-coder-32k
REASONING_LLM=dashscope
REASONING_LLM_MODEL=qwen-turbo  # Use faster model for simple reasoning tasks

# Alternative models (optional)
# MAIN_LLM_MODEL=qwen-plus  # Balanced performance (¥4/1M tokens)
# MAIN_LLM_MODEL=qwen-turbo  # Fastest, most cost-effective (¥2/1M tokens)
# MAIN_LLM_MODEL=qwen-long  # Long context (1M tokens) (¥0.5/1M tokens)
# MAIN_LLM_MODEL=qwen2.5-coder-32k  # Code-specialized model (¥2/1M tokens)

# =============================================================================
# Other China-friendly LLM Providers (Optional)
# =============================================================================

# Zhipu AI (智谱AI) - Alternative China provider
# Get API key: https://open.bigmodel.cn/
# ZHIPU_API_KEY=your-zhipu-api-key
# MAIN_LLM=zhipu
# MAIN_LLM_MODEL=glm-4-flash  # Options: glm-4, glm-4-flash, glm-4v

# Ollama - Local LLM (No API key needed, completely free)
# Download: https://ollama.ai/download
# OLLAMA_BASE_URL=http://localhost:11434
# MAIN_LLM=ollama
# MAIN_LLM_MODEL=qwen2.5:7b  # Options: qwen2.5:7b, llama3.1:8b, deepseek-coder:6.7b

# ==================== SMS Service ====================
# Aliyun SMS for phone verification
ALIYUN_SMS_ACCESS_KEY_ID=${ALIYUN_ACCESS_KEY_ID}
ALIYUN_SMS_ACCESS_KEY_SECRET=${ALIYUN_ACCESS_KEY_SECRET}
ALIYUN_SMS_SIGN_NAME=your_sms_signature
ALIYUN_SMS_TEMPLATE_CODE=SMS_123456789

# ==================== Email Service ====================
# Aliyun Direct Mail (邮件推送)
ALIYUN_EMAIL_ACCESS_KEY_ID=${ALIYUN_ACCESS_KEY_ID}
ALIYUN_EMAIL_ACCESS_KEY_SECRET=${ALIYUN_ACCESS_KEY_SECRET}
ALIYUN_EMAIL_REGION=cn-hangzhou
ALIYUN_EMAIL_FROM=noreply@yourdomain.com
ALIYUN_EMAIL_FROM_NAME=Kortix

# ==================== Sandbox Configuration ====================
# Code execution sandbox provider
SANDBOX_PROVIDER=docker  # Options: docker | e2b

# Docker Sandbox Configuration (推荐用于中国部署)
DOCKER_HOST=unix:///var/run/docker.sock  # Windows: npipe:////./pipe/docker_engine
SANDBOX_IMAGE=kortix-sandbox:latest
SANDBOX_NETWORK=bridge
SANDBOX_MEMORY_LIMIT=512m  # Memory limit per sandbox
SANDBOX_CPU_LIMIT=1.0      # CPU cores per sandbox
SANDBOX_TIMEOUT=300        # Execution timeout in seconds
SANDBOX_ENABLE_GPU=false   # Enable GPU support (requires nvidia-docker)

# Note: Ensure Docker is installed and running
# Build the sandbox image: docker build -t kortix-sandbox:latest -f backend/core/sandbox/Dockerfile .


# ==================== Authentication ====================
# JWT configuration for self-hosted auth
JWT_SECRET=your_jwt_secret_key_at_least_32_chars
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# ==================== Redis (Optional - for caching) ====================
# Use Aliyun Redis or local Redis
REDIS_HOST=your-redis.redis.rds.aliyuncs.com
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0

# ==================== Payment (China) ====================
# Alipay Configuration
ALIPAY_APP_ID=your_alipay_app_id
ALIPAY_PRIVATE_KEY=your_alipay_private_key
ALIPAY_PUBLIC_KEY=alipay_public_key

# WeChat Pay Configuration (optional)
WECHAT_PAY_APP_ID=your_wechat_app_id
WECHAT_PAY_MCH_ID=your_merchant_id
WECHAT_PAY_API_KEY=your_api_key

# ==================== Application Settings ====================
# Backend URL
BACKEND_URL=http://localhost:8000
FRONTEND_URL=http://localhost:3000

# Environment mode
ENV_MODE=production  # Options: local | staging | production

# ==================== Optional: Mixed Cloud ====================
# You can mix Aliyun with other services if needed

# Use Aliyun OSS but keep Supabase for auth (during migration)
# DATABASE_PROVIDER=aliyun
# STORAGE_PROVIDER=aliyun_oss
# AUTH_PROVIDER=supabase  # Temporary during migration

# ==================== Monitoring & Logging ====================
# Aliyun Log Service (optional)
# ALIYUN_LOG_PROJECT=kortix-logs
# ALIYUN_LOG_LOGSTORE=application-logs

# ==================================================================
# Quick Start Checklist:
# ==================================================================
# 1. [ ] Create Aliyun account and get Access Key
# 2. [ ] Create RDS PostgreSQL instance
# 3. [ ] Create OSS bucket
# 4. [ ] Get DashScope API key for LLM
# 5. [ ] Set up Redis (optional but recommended)
# 6. [ ] Configure SMS signature and template
# 7. [ ] Set up payment (Alipay/WeChat Pay)
# 8. [ ] Update DNS and domain (for production)
# 9. [ ] Enable CDN for OSS (optional, for better performance)
# 10. [ ] Set up monitoring and alerts
# ==================================================================

# For detailed setup guide, see: docs/DEPLOYMENT_CHINA.md
