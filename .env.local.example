# ==================================================================
# Kortix - Local Deployment Configuration Example
# ==================================================================
# This file shows how to configure Kortix for local/self-hosted deployment
# Perfect for development, testing, or on-premise installations
# Copy this to .env and fill in your settings
# ==================================================================

# ==================== Cloud Provider Selection ====================
CLOUD_PROVIDER=local  # Local/self-hosted deployment

# ==================== Database (Local PostgreSQL) ====================
# Local PostgreSQL Configuration (e.g., Docker container)
DATABASE_URL=postgresql://kortix_user:password@localhost:5432/kortix

# OR use individual components:
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DATABASE=kortix
# POSTGRES_USER=kortix_user
# POSTGRES_PASSWORD=your_secure_password

# For development, enable SQL echo (optional)
# POSTGRES_ECHO=true

# ==================== Object Storage (MinIO) ====================
# MinIO Configuration (S3-compatible local storage)
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=kortix-files
MINIO_SECURE=false  # Set to true if using HTTPS

# ==================== LLM Service ====================
# Option 1: Ollama (Local LLM - Recommended for offline/privacy)
OLLAMA_BASE_URL=http://localhost:11434
MAIN_LLM=ollama
MAIN_LLM_MODEL=llama2  # Options: llama2, mistral, codellama, qwen

# Option 2: Use cloud LLM APIs (requires internet)
# Uncomment one of the following:

# OpenAI
# OPENAI_API_KEY=sk-your-openai-key
# MAIN_LLM=openai
# MAIN_LLM_MODEL=gpt-4o-mini

# Anthropic Claude
# ANTHROPIC_API_KEY=sk-ant-your-key
# MAIN_LLM=anthropic
# MAIN_LLM_MODEL=claude-3-5-haiku-20241022

# Aliyun Bailian (if in China but deploying locally)
# DASHSCOPE_API_KEY=sk-your-dashscope-key
# MAIN_LLM=dashscope
# MAIN_LLM_MODEL=qwen-turbo

# ==================== Sandbox Configuration ====================
# Docker-based code execution sandbox
SANDBOX_PROVIDER=docker

# Docker configuration (if Docker is remote)
# DOCKER_HOST=unix:///var/run/docker.sock
# DOCKER_TLS_VERIFY=false

# ==================== Authentication ====================
# Self-hosted JWT Authentication
JWT_SECRET=your_very_secure_jwt_secret_key_at_least_32_characters_long
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=30

# ==================== Redis (Local) ====================
# Local Redis for caching and sessions
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=  # Empty for local dev, set for production
REDIS_DB=0

# ==================== Email Service (Local/Development) ====================
# Notification adapter configuration
NOTIFICATION_PROVIDER=local_smtp  # Options: local_smtp | aliyun | tencent | mailtrap

# Option 1: Local SMTP (Mailpit - included in docker-compose.local.yaml)
SMTP_HOST=localhost
SMTP_PORT=1025  # Mailpit默认端口
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@localhost
SMTP_FROM_NAME=Kortix Local
# Mailpit Web界面: http://localhost:8025

# Option 2: Gmail (需要应用专用密码)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USE_TLS=true
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_app_password

# ==================== SMS Service (Development) ====================
# SMS通过notification_adapter发送，本地环境使用Mock
# SMS会打印到控制台，不会实际发送

# 如需使用真实短信服务，配置云服务商:
# 阿里云短信
# ALIYUN_ACCESS_KEY_ID=your_key
# ALIYUN_ACCESS_KEY_SECRET=your_secret
# ALIYUN_SMS_SIGN_NAME=your_sign_name
# ALIYUN_SMS_VERIFICATION_TEMPLATE=SMS_xxx

# 腾讯云短信
# TENCENT_SECRET_ID=your_id
# TENCENT_SECRET_KEY=your_key
# TENCENT_SMS_APP_ID=your_app_id
# TENCENT_SMS_SIGN=your_sign

# ==================== Payment (Local/Testing) ====================
# Payment adapter configuration
PAYMENT_PROVIDER=local_mock  # Options: local_mock | stripe | alipay | wechat

# Option 1: Local Mock (开发测试，所有操作立即成功)
# 无需配置，默认即可

# Option 2: Stripe Test Mode (国际支付)
# PAYMENT_PROVIDER=stripe
# STRIPE_PUBLISHABLE_KEY=pk_test_xxx
# STRIPE_SECRET_KEY=sk_test_xxx
# STRIPE_WEBHOOK_SECRET=whsec_xxx

# Option 3: 支付宝沙箱（中国支付）
# PAYMENT_PROVIDER=alipay
# ALIPAY_APP_ID=your_app_id
# ALIPAY_PRIVATE_KEY=your_private_key
# ALIPAY_PUBLIC_KEY=alipay_public_key
# ALIPAY_GATEWAY=https://openapi.alipaydev.com/gateway.do  # 沙箱环境

# Option 4: 微信支付（中国支付）
# PAYMENT_PROVIDER=wechat
# WECHAT_MCHID=your_mch_id
# WECHAT_SERIAL_NO=your_serial_no
# WECHAT_PRIVATE_KEY=your_private_key
# WECHAT_APIV3_KEY=your_apiv3_key

# ==================== Application Settings ====================
# Local URLs
BACKEND_URL=http://localhost:8000
FRONTEND_URL=http://localhost:3000

# Environment mode
ENV_MODE=local  # Options: local | staging | production

# Debug mode (only for development!)
DEBUG=true
LOG_LEVEL=DEBUG  # Options: DEBUG | INFO | WARNING | ERROR

# ==================== Optional Services ====================

# Search Service (if not using Tavily)
# You can use local search or disable
SEARCH_PROVIDER=disabled

# Analytics (disable for local)
ANALYTICS_ENABLED=false

# ==================== Docker Compose Services ====================
# These are automatically set by docker-compose.yaml
# Uncomment if running services separately:

# PostgreSQL (Docker Compose)
# DATABASE_URL=postgresql://postgres:postgres@postgres:5432/kortix

# MinIO (Docker Compose)
# MINIO_ENDPOINT=minio:9000

# Redis (Docker Compose)
# REDIS_HOST=redis
# REDIS_PORT=6379

# Ollama (Docker Compose)
# OLLAMA_BASE_URL=http://ollama:11434

# ==================================================================
# Quick Start with Docker Compose:
# ==================================================================
# 1. [ ] Copy this file to .env
# 2. [ ] Run: docker-compose up -d
# 3. [ ] Run migrations: python scripts/migrate.py
# 4. [ ] Access at http://localhost:3000
#
# Services included in Docker Compose:
# - PostgreSQL (database)
# - MinIO (object storage)
# - Redis (cache/sessions)
# - Ollama (local LLM - optional)
# - Mailhog (email testing - optional)
# ==================================================================

# ==================================================================
# Quick Start without Docker (Manual):
# ==================================================================
# 1. [ ] Install PostgreSQL locally
# 2. [ ] Install Redis locally
# 3. [ ] Install MinIO or use file storage
# 4. [ ] Install Ollama for local LLM
# 5. [ ] Update the connection settings above
# 6. [ ] Run: python start.py
# ==================================================================

# For detailed setup guide, see: docs/DEPLOYMENT_LOCAL.md
